(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{4659:(e,n,a)=>{"use strict";e.exports=a.p+"static/media/ort-wasm-simd-threaded.jsep.c198d660.wasm"},6760:(e,n,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(8044)}])},7328:(e,n,a)=>{e.exports=a(8022)},7394:(e,n,a)=>{"use strict";e.exports=a.p+"static/media/ort.bundle.min.c07fcd07.mjs"},8044:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>B});var t=a(7876),r=a(7328),i=a.n(r),o=a(8223),s=a.n(o),l=a(4232);let u=["Andean Guan","Dwarf Tinamou","North Island Brown Kiwi","Andean Tinamou"],d=["EX1_Andean_Guan5.mp3","EX2_Dwarf_Tinamou4.mp3","EX3_North_Island_Brown_Kiwi8.mp3","EX4_Andean_Tinamou16.mp3"],c={2:"WRONG_EX3.mp3",3:"WRONG_EX4.mp3"};var h=a(444),m=class extends String{constructor(e,n,a){super(String.fromCodePoint(...Array.from(new Uint32Array(e,n,a))))}},g=new TextDecoder("latin1");async function p(e,n={}){var a;let t,r,i,o;if("string"==typeof e){let n=await fetch(e);t=await n.arrayBuffer()}else t=e instanceof ArrayBuffer?e:e instanceof Blob?await e.arrayBuffer():e.buffer;let{headerOffset:s,headerLen:l}=function(e){let n=new DataView(e);if("\x93NUMPY"!==String.fromCharCode(n.getUint8(0),n.getUint8(1),n.getUint8(2),n.getUint8(3),n.getUint8(4),n.getUint8(5)))throw Error("Not an .npy file");let a=n.getUint8(6),t=n.getUint8(7);return a<=1?{headerOffset:10,headerLen:n.getUint16(8,!0),version:[a,t]}:{headerOffset:12,headerLen:Number(n.getUint32(8,!0)),version:[a,t]}}(t),u=new Uint8Array(t,s,l),{dtype:d,fortranOrder:c,shape:h}=(a=g.decode(u).trim(),r=/'descr'\s*:\s*'([^']+)'/.exec(a)?.[1],i=/'fortran_order'\s*:\s*(True|False)/.exec(a)?.[1]==="True",1===(o=(/'shape'\s*:\s*\(([^)]*)\)/.exec(a)?.[1]??"").split(",").map(e=>e.trim()).filter(Boolean).map(e=>Number(e))).length&&a.includes("(n,)"),{dtype:r,fortranOrder:i,shape:o});if(!d||!h)throw Error("Malformed .npy header");return{data:function(e,n,a,t){let r=e.startsWith("<")||e.startsWith("|"),i=e.substring(e.length-2);if("U"===i[0]){let e=parseInt(i.substring(1)),t=String(new m(n,a)),r=[];for(let n=0;n<t.length;n+=e)r.push(t.substring(n,n+e).replace(/\0/g,""));return r}switch(i){case"b1":if(!r)return new Uint8Array(n,a);{let e=new Uint8Array(n,a),t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=0!==e[n];return t}case"i1":return new Int8Array(n,a);case"u1":return new Uint8Array(n,a);case"i2":return new Int16Array(n,a);case"u2":return new Uint16Array(n,a);case"i4":return new Int32Array(n,a);case"u4":return new Uint32Array(n,a);case"i8":return new BigInt64Array(n,a);case"u8":return new BigUint64Array(n,a);case"f4":return new Float32Array(n,a);case"f8":return new Float64Array(n,a);case"f2":if(!1!==t.convertFloat16){let e=new Uint16Array(n,a),t=new Float32Array(e.length);for(let n=0;n<e.length;n++)t[n]=function(e){let n=(32768&e)>>15,a=(31744&e)>>10,t=1023&e;return 0===a?(n?-1:1)*6103515625e-14*(t/1024):31===a?t?NaN:n?-1/0:1/0:(n?-1:1)*Math.pow(2,a-15)*(1+t/1024)}(e[n]);return t}return new Uint16Array(n,a);default:throw Error(`Unsupported dtype: ${e}`)}}(d,t,s+l,n),shape:h,dtype:d.slice(1),fortranOrder:c}}var f=a(2851),w=a.n(f);let y={0:["n01440764","Andean Guan"],1:["n01443537","Andean Tinamou"],2:["n01484850","Australian Brushturkey"],3:["n01491361","Band-tailed Guan"],4:["n01494475","Barred Tinamou"],5:["n01496331","Bartlett's Tinamou"],6:["n01498041","Baudo Guan"],7:["n01514668","Bearded Guan"],8:["n01514859","Berlepsch's Tinamou"],9:["n01518878","Biak Scrubfowl"],10:["n01530575","Black Tinamou"],11:["n01531178","Black-billed Brushturkey"],12:["n01532829","Black-capped Tinamou"],13:["n01534433","Black-fronted Piping Guan"],14:["n01537544","Blue-throated Piping Guan"],15:["n01558993","Brazilian Tinamou"],16:["n01560419","Brown Tinamou"],17:["n01580077","Brushland Tinamou"],18:["n01582220","Buff-browed Chachalaca"],19:["n01592084","Cauca Guan"],20:["n01601694","Chaco Chachalaca"],21:["n01608432","Chestnut-bellied Guan"],22:["n01614925","Chestnut-headed Chachalaca"],23:["n01616318","Chestnut-winged Chachalaca"],24:["n01622779","Chilean Tinamou"],25:["n01629819","Choco Tinamou"],26:["n01630670","Cinereous Tinamou"],27:["n01631663","Collared Brushturkey"],28:["n01632458","Colombian Chachalaca"],29:["n01632777","Common Ostrich"],30:["n01641577","Crested Guan"],31:["n01644373","Curve-billed Tinamou"],32:["n01644900","Darwin's Nothura"],33:["n01664065","Dusky Megapode"],34:["n01665541","Dusky-legged Guan"],35:["n01667114","Dwarf Cassowary"],36:["n01667778","Dwarf Tinamou"],37:["n01669191","East Brazilian Chachalaca"],38:["n01675722","Elegant Crested Tinamou"],39:["n01677366","Emu"],40:["n01682714","Great Spotted Kiwi"],41:["n01685808","Great Tinamou"],42:["n01687978","Greater Rhea"],43:["n01688243","Grey Tinamou"],44:["n01689811","Grey-headed Chachalaca"],45:["n01692333","Grey-legged Tinamou"],46:["n01693334","Highland Tinamou"],47:["n01694178","Hooded Tinamou"],48:["n01695060","Huayco Tinamou"],49:["n01697457","Lesser Nothura"],50:["n01698640","Lesser Rhea"],51:["n01704323","Little Chachalaca"],52:["n01728572","Little Spotted Kiwi"],53:["n01728920","Little Tinamou"],54:["n01729322","Maleo"],55:["n01729977","Malleefowl"],56:["n01734418","Marail Guan"],57:["n01735189","Melanesian Megapode"],58:["n01737021","Micronesian Megapode"],59:["n01739381","Moluccan Megapode"],60:["n01740131","New Guinea Scrubfowl"],61:["n01742172","Nicobar Megapode"],62:["n01744401","North Island Brown Kiwi"],63:["n01748264","Northern Cassowary"],64:["n01749939","Okarito Kiwi"],65:["n01751748","Orange-footed Scrubfowl"],66:["n01753488","Ornate Tinamou"],67:["n01755581","Pale-browed Tinamou"],68:["n01756291","Patagonian Tinamou"],69:["n01768244","Philippine Megapode"],70:["n01770081","Plain Chachalaca"],71:["n01770393","Puna Tinamou"],72:["n01773157","Quebracho Crested Tinamou"],73:["n01773549","Red-billed Brushturkey"],74:["n01773797","Red-faced Guan"],75:["n01774384","Red-legged Tinamou"],76:["n01774750","Red-throated Piping Guan"],77:["n01775062","Red-winged Tinamou"],78:["n01776313","Rufous-bellied Chachalaca"],79:["n01784675","Rufous-headed Chachalaca"],80:["n01795545","Rufous-vented Chachalaca"],81:["n01796340","Rusty Tinamou"],82:["n01797886","Rusty-margined Guan"],83:["n01798484","Scaled Chachalaca"],84:["n01806143","Slaty-breasted Tinamou"],85:["n01806567","Small-billed Tinamou"],86:["n01807496","Solitary Tinamou"],87:["n01817953","Somali Ostrich"],88:["n01818515","Southern Brown Kiwi"],89:["n01819313","Southern Cassowary"],90:["n01820546","Speckled Chachalaca"],91:["n01824575","Spix's Guan"],92:["n01828970","Spotted Nothura"],93:["n01829413","Sula Megapode"],94:["n01833805","Taczanowski's Tinamou"],95:["n01843065","Tanimbar Megapode"],96:["n01843383","Tataupa Tinamou"],97:["n01847000","Tawny-breasted Tinamou"],98:["n01855032","Tepui Tinamou"],99:["n01855672","Thicket Tinamou"],100:["n01860187","Tongan Megapode"],101:["n01871265","Trinidad Piping Guan"],102:["n01872401","Undulated Tinamou"],103:["n01873310","Vanuatu Megapode"],104:["n01877812","Variegated Tinamou"],105:["n01882714","Wattled Brushturkey"],106:["n01883070","West Mexican Chachalaca"],107:["n01910747","White-bellied Chachalaca"],108:["n01914609","White-bellied Nothura"],109:["n01917289","White-browed Guan"],110:["n01924916","White-crested Guan"],111:["n01930112","White-throated Tinamou"],112:["n01943899","White-winged Guan"],113:["n01944390","Yellow-legged Tinamou"]};async function x(e){let n=await h.wV.create("/cs416-web-demo/static/model/model.onnx",{executionProviders:["wasm"],graphOptimizationLevel:"all"});console.log("Inference session created"),console.log("----------------INPUT--------------------"),console.log(e),console.log("------------------------------------------");var[a,t]=await T(n,e);return[a,t]}async function T(e,n){let a=new Date,t={};t[e.inputNames[0]]=n;let r=await e.run(t),i=(new Date().getTime()-a.getTime())/1e3,o=r[e.outputNames[0]];console.log("----------------OUTPUT--------------------"),console.log(o),console.log("------------------------------------------"),console.log("output: ",o),console.log("output.data: ",o.data);var s=function(e,n=5){let a=w().isTypedArray(e)?Array.prototype.slice.call(e):e,t=w().reverse(w().sortBy(a.map((e,n)=>[e,n]),e=>e[0]));return w().take(t,n).map(e=>{let n=y[e[1]];return{id:n[0],index:parseInt(e[1].toString(),10),name:n[1],probability:e[0]}})}(o.data,5);return console.log("results: ",s),[s,i]}async function b(e,n=0){let a=await fetch(e),t=await a.arrayBuffer(),r=await p(t);if(n<0||n>=4)throw Error(`Batch index ${n} out of range. Must be between 0 and 3`);let i=11136*n,o=r.data.slice(i,i+11136);return new h.qY("float32",o,[1,128,87,1])}async function _(e){let n=await b("/cs416-web-demo/data/example_features.npy",e),[a,t]=await x(n);return[a,t]}let C=e=>{let n=(0,l.useRef)(null),a=(0,l.useRef)(null),[r,i]=(0,l.useState)(""),[o,h]=(0,l.useState)(""),[m,g]=(0,l.useState)(""),[p,f]=(0,l.useState)(""),[w,y]=(0,l.useState)(null),[x,T]=(0,l.useState)(!1),b=e=>{y(e),f(u[e]),i("Inferencing..."),h(""),g(""),C(e),B(e)},C=e=>{let n=a.current;n&&(n.pause(),n.currentTime=0,n.src=`/cs416-web-demo/data/birdsongs/${d[e]}`,n.play(),T(!0))},B=async e=>{var[n,a]=await _(e),t=n[0];i(t.name),h(t.probability),g(`Inference speed: ${a} seconds`)},j=()=>r&&p?r.toLowerCase()===p.toLowerCase():null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:s().grid,onClick:()=>b(0),children:"Bird Song A"}),(0,t.jsx)("br",{}),(0,t.jsx)("button",{className:s().grid,onClick:()=>b(1),children:"Bird Song B"}),(0,t.jsx)("br",{}),(0,t.jsx)("button",{className:s().grid,onClick:()=>b(2),children:"Bird Song C"}),(0,t.jsx)("br",{}),(0,t.jsx)("button",{className:s().grid,onClick:()=>b(3),children:"Bird Song D"}),(0,t.jsx)("br",{}),(0,t.jsx)("audio",{ref:a,controls:!0,onEnded:()=>T(!1),onPause:()=>T(!1),onPlay:()=>T(!0),style:{marginTop:"20px",marginBottom:"10px"}}),x&&(0,t.jsx)("div",{style:{marginBottom:"10px",color:"#0070f3",fontWeight:"bold"},children:"\uD83D\uDD0A Playing audio..."}),(0,t.jsx)("br",{}),(0,t.jsx)("canvas",{ref:n,width:e.width,height:e.height}),p&&(0,t.jsxs)("div",{style:{marginTop:"20px"},children:[(0,t.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,t.jsx)("strong",{children:"Actual:"})," ",p]}),r&&"Inferencing..."!==r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,t.jsx)("strong",{children:"Predicted:"})," ",(0,t.jsx)("span",{style:{color:!0===j()?"green":!1===j()?"red":"black",fontWeight:"bold"},children:r})," ",(0,t.jsx)("span",{style:{fontSize:"1.2em"},children:!0===j()?"✓":!1===j()?"✗":""})]}),(0,t.jsxs)("div",{style:{marginBottom:"5px"},children:[(0,t.jsx)("strong",{children:"Confidence:"})," ",o]}),!1===j()&&null!==w&&c[w]&&(0,t.jsx)("div",{style:{marginTop:"10px",marginBottom:"10px"},children:(0,t.jsxs)("button",{onClick:()=>{let e=a.current;e&&null!==w&&c[w]&&(e.pause(),e.currentTime=0,e.src=`/cs416-web-demo/data/birdsongs/${c[w]}`,e.play(),T(!0))},style:{padding:"8px 12px",backgroundColor:"#0070f3",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:["\uD83D\uDD0A Play audio of predicted species (",r,")"]})})]}),"Inferencing..."===r&&(0,t.jsx)("div",{style:{marginBottom:"10px"},children:r}),(0,t.jsx)("div",{children:m})]})]})},B=()=>(0,t.jsxs)("div",{className:s().container,children:[(0,t.jsxs)(i(),{children:[(0,t.jsx)("title",{children:"ORT Web Example"}),(0,t.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("main",{className:s().main,children:[(0,t.jsx)("h1",{className:s().title,children:"Bird Song Classification Examples"}),(0,t.jsx)(C,{width:240,height:240}),(0,t.jsx)("div",{id:"result",className:"mt-3"})]}),(0,t.jsx)("footer",{className:s().footer,children:(0,t.jsx)("a",{href:"https://onnxruntime.ai/docs",target:"_blank",rel:"noopener noreferrer"})})]})},8223:e=>{e.exports={container:"Home_container__d256j",main:"Home_main__VkIEL",footer:"Home_footer__yFiaX",title:"Home_title__hYX6j",description:"Home_description__uXNdx",code:"Home_code__VVrIr",grid:"Home_grid__AVljO",card:"Home_card__E5spL",logo:"Home_logo__IOQAX"}}},e=>{e.O(0,[929,888,636,593,792],()=>e(e.s=6760)),_N_E=e.O()}]);